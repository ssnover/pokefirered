.set LOCALID_SCIENTIST, 1

SixIsland_RuinValley_MapScripts::
	map_script MAP_SCRIPT_ON_LOAD, SixIsland_RuinValley_OnLoad
	.byte 0

SixIsland_RuinValley_OnLoad::
	call_if_set FLAG_USED_CUT_ON_RUIN_VALLEY_BRAILLE, SixIsland_RuinValley_EventScript_OpenDottedHoleDoor
	end

SixIsland_RuinValley_EventScript_OpenDottedHoleDoor::
	setmetatile 24, 24, METATILE_SeviiIslands67_DottedHoleDoor_Open, 0
	return

SixIsland_RuinValley_EventScript_Scientist::
	lock
	msgbox SixIsland_RuinValley_Text_CantFigureOutHowToGetInside
	applymovement LOCALID_SCIENTIST, Common_Movement_FacePlayer
	waitmovement 0
	msgbox SixIsland_RuinValley_Text_IFoundThisPlace
	applymovement LOCALID_SCIENTIST, Common_Movement_FaceOriginalDirection
	waitmovement 0
	release
	end

SixIsland_RuinValley_EventScript_Researcher::
	lock
	faceplayer
	msgbox SixIsland_RuinValley_Text_ResearchingRuins
	call_if_unset FLAG_GOT_FOSSIL_FROM_RUIN_VALLEY, SixIsland_RuinValley_EventScript_GiveOtherFossil
	call_if_set FLAG_USED_CUT_ON_RUIN_VALLEY_BRAILLE, SixIsland_RuinValley_EventScript_GreatfulResearcher
	release
	end

SixIsland_RuinValley_EventScript_GiveOtherFossil::
	msgbox SixIsland_RuinValley_Text_GiveFossil
	call_if_unset FLAG_GOT_HELIX_FOSSIL, SixIsland_RuinValley_EventScript_GiveHelixFossil
	call_if_unset FLAG_GOT_DOME_FOSSIL, SixIsland_RuinValley_EventScript_GiveDomeFossil
	setflag FLAG_GOT_FOSSIL_FROM_RUIN_VALLEY
	return

SixIsland_RuinValley_EventScript_GiveHelixFossil::
	giveitem ITEM_HELIX_FOSSIL
	setflag FLAG_GOT_HELIX_FOSSIL
	return

SixIsland_RuinValley_EventScript_GiveDomeFossil::
	giveitem ITEM_DOME_FOSSIL
	setflag FLAG_GOT_DOME_FOSSIL
	return

SixIsland_RuinValley_EventScript_GreatfulResearcher::
	msgbox SixIsland_RuinValley_Text_ThanksForOpening
	return

SixIsland_RuinValley_EventScript_DottedHoleDoor::
	lockall
	goto_if_set FLAG_USED_CUT_ON_RUIN_VALLEY_BRAILLE, SixIsland_RuinValley_EventScript_DottedHoleDoorOpen
	msgbox SixIsland_RuinValley_Text_CheckDoorMoreThoroughly, MSGBOX_YESNO
	goto_if_eq VAR_RESULT, NO, SixIsland_RuinValley_EventScript_IgnoreDottedHoleDoor
	msgbox SixIsland_RuinValley_Text_SeveralDotsOnTheDoor
	braillemessage Braille_Text_Cut
	waitbuttonpress
	releaseall
	end

SixIsland_RuinValley_EventScript_DottedHoleDoorOpen::
	msgbox SixIsland_RuinValley_Text_DoorIsOpen
	releaseall
	end

SixIsland_RuinValley_EventScript_IgnoreDottedHoleDoor::
	msgbox SixIsland_RuinValley_Text_LeftDoorAlone
	releaseall
	end
